{% extends '../../menu.html' %}

{% load static %}

{% block content %}

<section class="seccionPerfil">
    <div class="container-fluid">
        <div class="row">

            <!-- Menú lateral -->
            {% include '../menuLateral.html' %}

            <!-- Contenido -->
            <div class="col-10">
                <div class="tituloPerfil text-center">
                    <h1 style="color: #357678;">Subir blog</h1>
                </div>
                <br>
                <div class="contenidoSubirBlog">
                    <form id="ItemForm" method="POST" enctype="multipart/form-data">
                        {% csrf_token %}

                        <h3>Información básica:</h3>
                        <label for="id_name">Nombre:</label><br>
                        <input class="form-control" type="text" name="name" id="name" maxlength="150" required value="{{user.first_name}}"> <br>
                        
                        <label for="id_lastname">Apellidos:</label><br>
                        <input class="form-control" type="text" name="lastname" id="lastname" maxlength="150" required value="{{user.last_name}}"><br>
                        
                        <label for="id_email">Email:</label><br>
                        <input class="form-control" type="email" name="email" id="email" maxlength="254" required value="{{user.email}}"><br>

                        <h3>Añadir ó cambiar imágen de perfil:</h3>
                        <input type="file" class="form-control" name="image" id="image" accept="image/*" ><br>
                    
                        <h3>Cambio de contraseña:</h3>
                        <label for="id_password1">Nueva contraseña:</label><br>
                        <input type="password" class="form-control" name="password1" id="password1"><br>
                        
                        <label for="id_password2">Confirmar contraseña:</label><br> 
                        <input type="password" class="form-control" name="password2" id="password2" ><br>

                        <button type="submit" class="btn-Acciones " style="margin-top: 10px;">Guardar</button><br>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    {% if messages %}
        <div class="message-container">
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
</section>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Selecciona todos los elementos con la clase 'message-container'
        var messageContainers = document.querySelectorAll('.message-container');

        // Itera sobre cada contenedor de mensajes
        messageContainers.forEach(function(container) {
            // Oculta el contenedor después de 10 segundos
            setTimeout(function() {
                container.style.display = 'none';
            }, 4000); // 10000 milisegundos = 10 segundos
        });
    });
    tinymce.init({
    selector: '#contenido',
    height: 500,
    plugins: "advcode advlist advtable anchor autocorrect autolink autosave casechange charmap checklist codesample directionality editimage emoticons export footnotes formatpainter help image insertdatetime link linkchecker lists media mediaembed mergetags nonbreaking pagebreak permanentpen powerpaste searchreplace table tableofcontents tinymcespellchecker typography visualblocks visualchars wordcount",
    toolbar: "undo redo spellcheckdialog  | blocks fontfamily fontsize | bold italic underline forecolor backcolor | link image | align lineheight checklist bullist numlist | indent outdent | removeformat typography",
    images_file_types: 'jpg, svg, webp, png',
    file_picker_types: 'file image media',
    language: 'es_MX',  // Configura el idioma a español (México)
    setup: function (editor) {
    editor.on('NodeChange', function (e) {
      // Verifica si el nodo actual es una imagen
      if (e && e.element.nodeName === 'IMG') {
        // Aplica la clase 'imagenBlog' a la imagen automáticamente
        editor.dom.addClass(e.element, 'imagenBlog');
      }
    });
  }
});

</script>
{% include '../../footer.html' %}

{% endblock %}