{% extends '../../menu.html' %}

{% load static %}
 
{% block content %}
  <section class="seccionPerfil">
    <div class="container-fluid">
      <div class="row">
        <!-- Menú lateral -->
        {% include '../menuLateral.html' %}

        <!-- Contenido -->
        <div class="col-10">
          <div class="tituloPerfil text-center">
            <h1 style="color: #357678;">Subir contenido</h1>
          </div>
       
          <br />
          <div class="contenidoAdministrarContenido"> 
            <nav>
              <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <button class="nav-link active" id="nav-info-tab" data-bs-toggle="tab" data-bs-target="#nav-info" type="button" role="tab" aria-controls="nav-info" aria-selected="true">Infografías</button>
                <button class="nav-link" id="nav-videos-tab" data-bs-toggle="tab" data-bs-target="#nav-videos" type="button" role="tab" aria-controls="nav-videos" aria-selected="false">Videos</button>
                <button class="nav-link" id="nav-blogs-tab" data-bs-toggle="tab" data-bs-target="#nav-blogs" type="button" role="tab" aria-controls="nav-blogs" aria-selected="false">Blogs</button>
              </div>
            </nav>
            <div class="tab-content" id="nav-tabContent">
              <div class="tab-pane fade show active p-3" id="nav-info" role="tabpanel" aria-labelledby="nav-info-tab">
                

                <form method="post" enctype="multipart/form-data">
                  {% csrf_token %}
              <label>Título </label></br>
              {{form1.title}}</br>
              <label>Descripción</label></br>
              {{form1.description}}</br>
         
                  <label>Archivo</label></br>
                  {{form1.file}}</br>
                  <label>Categoria</label></br>
              {{form1.category}}</br>
              <div class="card">
                  <div class="card-header">
                      <h5 class="card-title">Contenido complementario</h5>
                  </div>
                  
                  <div class="card-body card-contenidoComplementario">
                      <div class="row">
                          <div class="col-md-4">
                              <input type="text" id="searchInfographics" placeholder="Buscar infografías">
                              {{ form1.supplementary_Infographics }}
                          </div>
                          <div class="col-md-4">
                              <input type="text" id="searchVideos" placeholder="Buscar Videos">
                              {{ form1.supplementary_videos }}
                          </div>
                          <div class="col-md-4">
                              <input type="text" id="searchBlogs" placeholder="Buscar blogs">
                              {{ form1.supplementary_Blogs}}
                          </div>
                      </div>
                  </div>
              </div>
              <button type="submit" class="btn-Acciones ">Subir</button>
              </form>

               



              </div>
              <div class="tab-pane fade p-3" id="nav-videos" role="tabpanel" aria-labelledby="nav-videos-tab">
                
                <form method="post">
                  {% csrf_token %}
                  <label>Título </label></br>
                  {{form2.title}}</br>
               <label>Identificador</label></br>
              {{form2.video_id}}</br>
              <div class="card">
                  <div class="card-header">
                      <h5 class="card-title">Contenido complementario</h5>
                  </div>
                  
                  <div class="card-body card-contenidoComplementario">
                      <div class="row">
                          <div class="col-md-4">
                              <input type="text" id="searchInfographics" placeholder="Buscar infografías">
                              {{ form2.supplementary_Infographics }}
                          </div>
                          <div class="col-md-4">
                              <input type="text" id="searchVideos" placeholder="Buscar Videos">
                              {{ form2.supplementary_videos }}
                          </div>
                          <div class="col-md-4">
                              <input type="text" id="searchBlogs" placeholder="Buscar blogs">
                              {{ form2.supplementary_Blogs}}
                          </div>
                      </div>
                  </div>
              </div>
              <button type="submit" class="btn-Acciones ">Subir</button>
              </form>

                
              </div> 



              <div class="tab-pane fade p-3" id="nav-blogs" role="tabpanel" aria-labelledby="nav-blogs-tab">
                <div class="table-responsive py-2 mt-2"> 
                  <!-- Hacemos responsiva -->
                  <div class="contenidoSubirBlog">
                    <form method="post" enctype="multipart/form-data" action="{% url 'subirBlog' %}">{% csrf_token %} 
                        <div class="mb-3">
                          <label for="exampleInputEmail1" class="form-label">Título</label>
                          <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="titulo">
                        </div>
                        <div class="mb-3">
                            <label for="exampleFormControlTextarea1" class="form-label">Imagen de portada</label><br>
                            <input type="file" class="form-control" id="imagenPortada"name="imagenPortada">
                        </div>
                        <div class="mb-3">
                            <label for="exampleFormControlTextarea3" class="form-label">Introducción</label>
                            <textarea class="form-control" id="introduccion" rows="2" name="introduccion"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="exampleFormControlTextarea2" class="form-label">Contenido</label>
                            <textarea class="form-control" id="contenido" rows="100" name="contenido"></textarea><br>
                        </div>
                        <input type="text" class="form-control" id="autor" aria-describedby="emailHelp" name="autor" value="{{request.user.first_name}} {{request.user.last_name}}" style="display: none;">
                        <div class="mx-auto text-center">
                            <button type="submit" class="btn-Enviar ">Publicar</button>
                        </div>
                    </form>
                </div>
                </div>

            </div>
          </div>

            




          </div>
        </div>
      </div>
    </div>
    {% if messages %}
    {% for message in messages %}
    <div class= {% if message.tags == 'alert-success' %} "alert alert-success alerta alert-dismissible fade show shadow custom-messages fixed-bottom" {% else %} "alert alert-danger alerta  alert-dismissible fade show shadow custom-messages fixed-bottom" {% endif %}>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            {{ message }} 
        </div>
    {% endfor %}
    {% endif %}
  </section>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
        // Selecciona todos los elementos con la clase 'message-container'
        var messageContainers = document.querySelectorAll('.message-container');

        // Itera sobre cada contenedor de mensajes
        messageContainers.forEach(function(container) {
            // Oculta el contenedor después de 10 segundos
            setTimeout(function() {
                container.style.display = 'none';
            }, 4000); // 10000 milisegundos = 10 segundos
        });
    });
    tinymce.init({
    selector: '#contenido',
    height: 500,
    plugins: "advcode advlist advtable anchor autocorrect autolink autosave casechange charmap checklist codesample directionality editimage emoticons export footnotes formatpainter help image insertdatetime link linkchecker lists media mediaembed mergetags nonbreaking pagebreak permanentpen powerpaste searchreplace table tableofcontents tinymcespellchecker typography visualblocks visualchars wordcount",
    toolbar: "undo redo spellcheckdialog  | blocks fontfamily fontsize | bold italic underline forecolor backcolor | link image | align lineheight checklist bullist numlist | indent outdent | removeformat typography",
    images_file_types: 'jpg, svg, webp, png',
    file_picker_types: 'file image media',
    language: 'es_MX',  // Configura el idioma a español (México)
    setup: function (editor) {
    editor.on('NodeChange', function (e) {
      // Verifica si el nodo actual es una imagen
      if (e && e.element.nodeName === 'IMG') {
        // Aplica la clase 'imagenBlog' a la imagen automáticamente
        editor.dom.addClass(e.element, 'imagenBlog');
      }
    });
  }
});

</script>
<style>
  .nav-tabs .nav-link.active {
  margin-left: 1em;
  background-color: #00132dda;
  font-size: medium;
  color: #ffffff; 
  border-radius: 15px;
  transition: 0.3s all;
  box-shadow: none;
  border: none;
}

.nav-tabs .nav-link {
  /* background-color: #ffffffb0; */
  margin-left: 0.8em;
  color: rgb(0, 0, 0);
  font-weight: 600;
  font-size: medium;
  box-shadow: none;
  border-radius: 15px;
  transition: 0.3s all;
}

.nav-tabs .nav-link:not(.active):hover {
  background-color: #8398b7da;
}

.tab-pane.fade.show.active {
    /* background-color: #00132dda; */
    /* font-size: medium; */
    color: black; 
    border-radius: 15px;
    box-shadow: none;
    transition: 0.3s all;
}
</style>


<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function () { 
      var supplementaryInfographicsField = document.getElementById('id_supplementary_Infographics');
      var searchInput = document.getElementById('searchInfographics');

      // Copia original de los elementos para su restauración
      var originalInfographicsOptions = Array.from(supplementaryInfographicsField.children);

      searchInput.addEventListener('input', function () {
          var searchValue = searchInput.value.toLowerCase();

          for (var i = 0; i < supplementaryInfographicsField.children.length; i++) {
              var optionLabel = supplementaryInfographicsField.children[i].textContent.toLowerCase();

              // Mostrar u ocultar según la coincidencia de búsqueda
              supplementaryInfographicsField.children[i].style.display = optionLabel.includes(searchValue) ? 'block' : 'none';
          }
      });

      // Restaurar la visibilidad al borrar el campo de búsqueda
      searchInput.addEventListener('blur', function () {
          if (searchInput.value === '') {
              for (var i = 0; i < originalInfographicsOptions.length; i++) {
                  originalInfographicsOptions[i].style.display = 'block';
              }
          }
      });

      var supplementaryVideosField = document.getElementById('id_supplementary_videos');
      var searchInputVideos = document.getElementById('searchVideos');

      // Copia original de los elementos para su restauración
      var originalVideosOptions = Array.from(supplementaryVideosField.children);

      searchInputVideos.addEventListener('input', function () {
          var searchValueVideos = searchInputVideos.value.toLowerCase();

          for (var i = 0; i < supplementaryVideosField.children.length; i++) {
              var optionLabelVideos = supplementaryVideosField.children[i].textContent.toLowerCase();

              // Mostrar u ocultar según la coincidencia de búsqueda
              supplementaryVideosField.children[i].style.display = optionLabelVideos.includes(searchValueVideos) ? 'block' : 'none';
          }
      });

      // Restaurar la visibilidad al borrar el campo de búsqueda
      searchInputVideos.addEventListener('blur', function () {
          if (searchInputVideos.value === '') {
              for (var i = 0; i < originalVideosOptions.length; i++) {
                  originalVideosOptions[i].style.display = 'block';
              }
          }
      });


      var supplementaryBlogsField = document.getElementById('id_supplementary_Blogs');
      var searchInputBlogs = document.getElementById('searchBlogs');

      // Copia original de los elementos para su restauración
      var originalBlogsOptions = Array.from(supplementaryBlogsField.children);

      searchInputBlogs.addEventListener('input', function () {
          var searchValueBlogs = searchInputBlogs.value.toLowerCase();

          for (var i = 0; i < supplementaryBlogsField.children.length; i++) {
              var optionLabelBlogs = supplementaryBlogsField.children[i].textContent.toLowerCase();

              // Mostrar u ocultar según la coincidencia de búsqueda
              supplementaryBlogsField.children[i].style.display = optionLabelBlogs.includes(searchValueBlogs) ? 'block' : 'none';
          }
      });

      // Restaurar la visibilidad al borrar el campo de búsqueda
      searchInputBlogs.addEventListener('blur', function () {
          if (searchInputBlogs.value === '') {
              for (var i = 0; i < originalBlogsOptions.length; i++) {
                  originalBlogsOptions[i].style.display = 'block';
              }
          }
      });
  });


</script>
  {% include '../../footer.html' %}
{% endblock %}
